"""
Ð¥Ð°Ð½Ð¾Ð¹ÑÑŒÐºÑ– Ð²ÐµÐ¶Ñ– â€” Ñ€ÐµÐºÑƒÑ€ÑÐ¸Ð²Ð½Ð¸Ð¹ Ð°Ð»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼ Ð· Ð»Ð¾Ð³ÑƒÐ²Ð°Ð½Ð½ÑÐ¼ ÑÑ‚Ð°Ð½Ñ–Ð² ðŸ§ 

ðŸ” Ð©Ð¾ Ñ€Ð¾Ð±Ð¸Ñ‚ÑŒ Ñ†Ñ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð°:
- Ð†Ð¼Ñ–Ñ‚ÑƒÑ” Ð¿Ñ€Ð¾Ñ†ÐµÑ Ð¿ÐµÑ€ÐµÐ¼Ñ–Ñ‰ÐµÐ½Ð½Ñ Ð´Ð¸ÑÐºÑ–Ð² Ð·Ñ– ÑÑ‚Ñ€Ð¸Ð¶Ð½Ñ A Ð½Ð° ÑÑ‚Ñ€Ð¸Ð¶ÐµÐ½ÑŒ C
- Ð”Ð¾Ñ‚Ñ€Ð¸Ð¼ÑƒÑ”Ñ‚ÑŒÑÑ Ð¿Ñ€Ð°Ð²Ð¸Ð»: Ð¾Ð´Ð¸Ð½ Ð´Ð¸ÑÐº Ð·Ð° Ñ€Ð°Ð·, Ð¼ÐµÐ½ÑˆÐ¸Ð¹ Ð½Ðµ ÐºÐ»Ð°Ð´ÐµÑ‚ÑŒÑÑ Ð½Ð° Ð±Ñ–Ð»ÑŒÑˆÐ¸Ð¹
- Ð’Ð¸Ð²Ð¾Ð´Ð¸Ñ‚ÑŒ Ð¿Ð¾ÐºÑ€Ð¾ÐºÐ¾Ð²Ð¾:
    â€¢ Ð¯ÐºÐ¸Ð¹ Ð´Ð¸ÑÐº Ð¿ÐµÑ€ÐµÐ¼Ñ–Ñ‰ÑƒÑ”Ñ‚ÑŒÑÑ Ñ– ÐºÑƒÐ´Ð¸
    â€¢ Ð¡Ñ‚Ð°Ð½ ÑƒÑÑ–Ñ… ÑÑ‚Ñ€Ð¸Ð¶Ð½Ñ–Ð² Ð¿Ñ–ÑÐ»Ñ ÐºÐ¾Ð¶Ð½Ð¾Ð³Ð¾ ÐºÑ€Ð¾ÐºÑƒ

ðŸ“¥ Ð’Ñ…Ñ–Ð´Ð½Ñ– Ð´Ð°Ð½Ñ–:
- ÐšÑ–Ð»ÑŒÐºÑ–ÑÑ‚ÑŒ Ð´Ð¸ÑÐºÑ–Ð² (n), Ð²Ð²Ð¾Ð´Ð¸Ñ‚ÑŒÑÑ Ð²Ñ€ÑƒÑ‡Ð½Ñƒ Ñ‡ÐµÑ€ÐµÐ· `input()`

ðŸ“¤ Ð’Ð¸Ð²Ñ–Ð´:
- ÐŸÐ¾Ñ‡Ð°Ñ‚ÐºÐ¾Ð²Ð¸Ð¹ ÑÑ‚Ð°Ð½ ÑÑ‚Ñ€Ð¸Ð¶Ð½Ñ–Ð²
- ÐŸÐ¾ÑÐ»Ñ–Ð´Ð¾Ð²Ð½Ñ–ÑÑ‚ÑŒ Ð´Ñ–Ð¹: Ð¿ÐµÑ€ÐµÐ¼Ñ–Ñ‰ÐµÐ½Ð½Ñ Ð´Ð¸ÑÐºÑ–Ð²
- ÐŸÑ€Ð¾Ð¼Ñ–Ð¶Ð½Ñ– ÑÑ‚Ð°Ð½Ð¸ Ð¿Ñ–ÑÐ»Ñ ÐºÐ¾Ð¶Ð½Ð¾Ð³Ð¾ ÐºÑ€Ð¾ÐºÑƒ
- ÐšÑ–Ð½Ñ†ÐµÐ²Ð¸Ð¹ ÑÑ‚Ð°Ð½

â–¶ï¸ ÐŸÑ€Ð¸ÐºÐ»Ð°Ð´ Ð·Ð°Ð¿ÑƒÑÐºÑƒ:
    python hanoi_towers.py
    Ð’Ð²ÐµÐ´Ñ–Ñ‚ÑŒ ÐºÑ–Ð»ÑŒÐºÑ–ÑÑ‚ÑŒ Ð´Ð¸ÑÐºÑ–Ð² (1 Ð°Ð±Ð¾ Ð±Ñ–Ð»ÑŒÑˆÐµ)

ðŸ§© Ð¦ÐµÐ¹ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ñ” Ð±Ð¾Ð½ÑƒÑÐ½Ð¸Ð¼ Ð·Ð°Ð²Ð´Ð°Ð½Ð½ÑÐ¼ Ð´Ð¾ Ñ‚ÐµÐ¼Ð¸ Â«Ð ÐµÐºÑƒÑ€ÑÑ–ÑÂ»
"""

def mini_hanoi(n, source, target, auxiliary, step=1):
    """
    Ð ÐµÐºÑƒÑ€ÑÐ¸Ð²Ð½Ðµ Ð²Ð¸Ñ€Ñ–ÑˆÐµÐ½Ð½Ñ Ð·Ð°Ð´Ð°Ñ‡Ñ– Ð¥Ð°Ð½Ð¾Ð¹ÑÑŒÐºÐ¸Ñ… Ð²ÐµÐ¶.
    ÐŸÐ¾Ð²ÐµÑ€Ñ‚Ð°Ñ” Ð·Ð°Ð³Ð°Ð»ÑŒÐ½Ñƒ ÐºÑ–Ð»ÑŒÐºÑ–ÑÑ‚ÑŒ ÐºÑ€Ð¾ÐºÑ–Ð².
    """
    if n == 1:
        print(f"â”‚ ÐšÑ€Ð¾Ðº {step}: \033[96mÐŸÐµÑ€ÐµÐ½ÐµÑÑ‚Ð¸ Ð´Ð¸ÑÐº 1 Ð· {source} Ð½Ð° {target}\033[0m")
        return step + 1
    step = mini_hanoi(n - 1, source, auxiliary, target, step)
    print(f"â”‚ ÐšÑ€Ð¾Ðº {step}: \033[96mÐŸÐµÑ€ÐµÐ½ÐµÑÑ‚Ð¸ Ð´Ð¸ÑÐº {n} Ð· {source} Ð½Ð° {target}\033[0m")
    step += 1
    step = mini_hanoi(n - 1, auxiliary, target, source, step)
    return step

def main():
    """
    ÐžÑÐ½Ð¾Ð²Ð½Ð° Ñ„ÑƒÐ½ÐºÑ†Ñ–Ñ Ð· Ð²Ð²ÐµÐ´ÐµÐ½Ð½ÑÐ¼ Ñ– Ñ€Ð°Ð¼ÐºÐ¾ÑŽ Ð½Ð°Ð²ÐºÐ¾Ð»Ð¾ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñƒ.
    """
    try:
        n = int(input("Ð’Ð²ÐµÐ´Ñ–Ñ‚ÑŒ ÐºÑ–Ð»ÑŒÐºÑ–ÑÑ‚ÑŒ Ð´Ð¸ÑÐºÑ–Ð² (n >= 1): "))
        if n < 1:
            raise ValueError("ÐšÑ–Ð»ÑŒÐºÑ–ÑÑ‚ÑŒ Ð´Ð¸ÑÐºÑ–Ð² Ð¿Ð¾Ð²Ð¸Ð½Ð½Ð° Ð±ÑƒÑ‚Ð¸ 1 Ð°Ð±Ð¾ Ð±Ñ–Ð»ÑŒÑˆÐµ.")

        print("\nâ•­" + "â”€" * 50)
        print("â”‚ ðŸ“¦  Ð Ñ–ÑˆÐµÐ½Ð½Ñ Ð·Ð°Ð´Ð°Ñ‡Ñ– Ð¥Ð°Ð½Ð¾Ð¹ÑÑŒÐºÐ¸Ñ… Ð²ÐµÐ¶:\nâ”‚")

        total_steps = mini_hanoi(n, "A", "C", "B")

        print("â”‚\nâ”‚ âœ… Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¾.")
        print(f"â”‚ ðŸ” Ð’ÑÑŒÐ¾Ð³Ð¾ ÐºÑ€Ð¾ÐºÑ–Ð²: {total_steps - 1}")
        print("â•°" + "â”€" * 50)

    except KeyboardInterrupt:
        print("\nâ— ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼Ð° Ð¿ÐµÑ€ÐµÑ€Ð²Ð°Ð½Ð° ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡ÐµÐ¼.")
    except ValueError as e:
        print(f"â— ÐŸÐ¾Ð¼Ð¸Ð»ÐºÐ°: {e}")

if __name__ == "__main__":
    main()